<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Navigation Test - Pyebwa</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        
        .test-info {
            background: #f0f0f0;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .test-button {
            background: #00217D;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        .status {
            margin-top: 20px;
            padding: 10px;
            background: #e0e0e0;
            border-radius: 4px;
        }
        
        #debugOutput {
            margin-top: 20px;
            padding: 10px;
            background: #333;
            color: #0f0;
            font-family: monospace;
            white-space: pre-wrap;
            border-radius: 4px;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h1>Mobile Navigation Test</h1>
        <p><strong>Screen Width:</strong> <span id="screenWidth"></span></p>
        <p><strong>Window Width:</strong> <span id="windowWidth"></span></p>
        <p><strong>Device Type:</strong> <span id="deviceType"></span></p>
        <p><strong>User Agent:</strong> <span id="userAgent"></span></p>
    </div>
    
    <h2>Test Actions</h2>
    <button class="test-button" onclick="testMobileNav()">Test Mobile Nav</button>
    <button class="test-button" onclick="openMobileNav()">Open Mobile Nav</button>
    <button class="test-button" onclick="closeMobileNav()">Close Mobile Nav</button>
    <button class="test-button" onclick="clearDebug()">Clear Debug</button>
    
    <div class="status" id="status">Ready to test...</div>
    
    <h3>Debug Output</h3>
    <div id="debugOutput"></div>
    
    <script>
        // Display device info
        function updateDeviceInfo() {
            document.getElementById('screenWidth').textContent = screen.width + 'px';
            document.getElementById('windowWidth').textContent = window.innerWidth + 'px';
            document.getElementById('deviceType').textContent = window.innerWidth <= 768 ? 'Mobile' : 'Desktop';
            document.getElementById('userAgent').textContent = navigator.userAgent;
        }
        
        // Log debug info
        function debug(message) {
            const output = document.getElementById('debugOutput');
            const timestamp = new Date().toLocaleTimeString();
            output.textContent += `[${timestamp}] ${message}\n`;
            output.scrollTop = output.scrollHeight;
        }
        
        // Clear debug output
        function clearDebug() {
            document.getElementById('debugOutput').textContent = '';
            debug('Debug cleared');
        }
        
        // Test mobile nav functionality
        function testMobileNav() {
            debug('Starting mobile nav test...');
            
            // Check if we're in app context
            if (window.parent !== window) {
                const parentDoc = window.parent.document;
                
                // Check for mobile menu button
                const mobileMenuBtn = parentDoc.getElementById('mobileMenuBtn');
                if (mobileMenuBtn) {
                    debug('✓ Mobile menu button found');
                    debug('  Display: ' + window.getComputedStyle(mobileMenuBtn).display);
                    debug('  Visibility: ' + window.getComputedStyle(mobileMenuBtn).visibility);
                    debug('  Position: ' + window.getComputedStyle(mobileMenuBtn).position);
                } else {
                    debug('✗ Mobile menu button NOT found');
                }
                
                // Check for mobile nav
                const mobileNav = parentDoc.getElementById('mobileNav');
                if (mobileNav) {
                    debug('✓ Mobile nav found');
                    debug('  Display: ' + window.getComputedStyle(mobileNav).display);
                    debug('  Classes: ' + mobileNav.className);
                } else {
                    debug('✗ Mobile nav NOT found');
                }
                
                // Check for nav items
                const navItems = parentDoc.querySelectorAll('.mobile-nav-item');
                debug(`Found ${navItems.length} mobile nav items`);
                
                // Check JavaScript
                if (window.parent.mobileNavSimple) {
                    debug('✓ Mobile nav simple script loaded');
                } else {
                    debug('✗ Mobile nav simple script NOT loaded');
                }
                
                if (window.parent.mobileNavEnhanced) {
                    debug('✓ Mobile nav enhanced script loaded');
                } else {
                    debug('✗ Mobile nav enhanced script NOT loaded');
                }
            } else {
                debug('Not in app context - open this page in the app iframe');
            }
            
            document.getElementById('status').textContent = 'Test complete - check debug output';
        }
        
        // Open mobile nav
        function openMobileNav() {
            if (window.parent !== window && window.parent.mobileNavSimple) {
                window.parent.mobileNavSimple.open();
                debug('Attempted to open mobile nav');
                document.getElementById('status').textContent = 'Mobile nav should be open';
            } else {
                debug('Cannot open - not in app context or script not loaded');
            }
        }
        
        // Close mobile nav
        function closeMobileNav() {
            if (window.parent !== window && window.parent.mobileNavSimple) {
                window.parent.mobileNavSimple.close();
                debug('Attempted to close mobile nav');
                document.getElementById('status').textContent = 'Mobile nav should be closed';
            } else {
                debug('Cannot close - not in app context or script not loaded');
            }
        }
        
        // Initialize
        updateDeviceInfo();
        window.addEventListener('resize', updateDeviceInfo);
        debug('Mobile nav test page loaded');
        debug('Window width: ' + window.innerWidth + 'px');
        debug('Is mobile viewport: ' + (window.innerWidth <= 768));
    </script>
</body>
</html>